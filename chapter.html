<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html">🏠 Home</a></li>
            <li><a href="popular.html">🔥 Popular</a></li>
            <li><a href="genres.html">📚 Genres</a></li>
            <li><a href="about.html">ℹ️ About</a></li>
        </ul>
    </nav>

    <div class="chapter-container">
        <h1 id="chapterTitle"></h1>
        <img id="chapterImage" src="" alt="Chapter Image" loading="lazy">

        <!-- Tombol Navigasi -->
        <div class="navigation">
            <button id="prevChapter">⬅️ Sebelumnya</button>
            <button id="nextChapter">➡️ Berikutnya</button>
            <button id="backToList">📖 Daftar Chapter</button>
        </div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const comicTitle = params.get("komik") || "judul_komik_1";
        let chapterNumber = parseInt(params.get("chapter")) || 1;

        // Set judul chapter
        document.getElementById("chapterTitle").innerText = `Chapter ${chapterNumber}`;

        // Set gambar sesuai chapter
        const imageElement = document.getElementById("chapterImage");
        const imageSrc = `images/${comicTitle}_ch${chapterNumber}.jpg`;

        imageElement.src = imageSrc;

        // Debugging: Cek apakah gambar berhasil dimuat
        imageElement.onload = function() {
            console.log("✅ Gambar berhasil dimuat:", imageSrc);
        };

        imageElement.onerror = function() {
            console.error("❌ Gagal memuat gambar:", imageSrc);
            imageElement.src = "images/not-found.jpg"; // Jika gambar tidak ada, pakai placeholder
        };

        console.log("📖 Chapter Number: ", chapterNumber);

        // Navigasi tombol
        document.getElementById("prevChapter").addEventListener("click", function() {
            if (chapterNumber > 1) {
                window.location.href = `chapter.html?komik=${comicTitle}&chapter=${chapterNumber - 1}`;
            }
        });

        document.getElementById("nextChapter").addEventListener("click", function() {
            window.location.href = `chapter.html?komik=${comicTitle}&chapter=${chapterNumber + 1}`;
        });

        // Tombol kembali ke daftar chapter
        document.getElementById("backToList").addEventListener("click", function() {
            window.location.href = `chapters.html?komik=${comicTitle}`;
        });

    </script>
</body>
</html>
